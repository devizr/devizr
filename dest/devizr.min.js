/*!
 * devizr 0.5.1
 * Device asset manager and JS feature detector
 * Copyright (c) 2013, 2014 Uli Preuss
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(e,n,t){"use strict";var r=function(){function o(e){this.name="Devizr Error",this.message=e||""}function i(e,n){v[e]=n}function u(){function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(r){switch(r){case e:return a.contentWindow;case n:return a.contentDocument;case n.documentElement:return a.contentDocument.documentElement;case t:return a.contentWindow.navigator;case screen:return a.contentWindow.screen}}var u=["moz","Moz","webkit","WebKit","ms","MS","o","O"],c=n.getElementsByTagName("body")[0],a=n.createElement("iframe");a.width="1",a.height="1",a.style.visibility="hidden",c.appendChild(a),m=function(n,t,o){var c,a,s,f=!1,l=e.navigator.userAgent.toLowerCase();if(1===arguments.length)return s=new RegExp(arguments[0],"i"),s.test(l);if(n=i(n),o)for(c=0;c<u.length;c++)a=u[c]+r(t),a in n&&(f=!0);return t in n&&(f=!0),f};for(var s in v){if("function"!=typeof v[s])throw new o("Invalid test - '"+s+"' is not a function!");v[s]()&&(s===s.toUpperCase()?b.push(s):g.push(s))}a.onload=function(){c.removeChild(a)}}function c(e){var n,t,r,o,i,u,c=0,s=0;if(a(e,"Array")){for(n=e.length;n>c;c++)t=e[c].width,t||(t=0),p.width>t>s&&(s=c);u=e[s]}else{if(!a(e,"Object"))throw new Error("devizr: Object or Array required!");u=e}r=u.addons;for(o in r)r.hasOwnProperty(o)&&(i=r[o],i.script&&l(i),i.style&&(i.stylesRequired=!0,d(i)))}function a(e,n){return Object.prototype.toString.call(e)==="[object "+n+"]"}function s(e){return!!~g.indexOf(e)}function f(e,n){var t=e.tests,r=!0,o=0;if("string"==typeof t&&(t=[t]),t)for(;o<t.length;o++)"!"===t[o][0]?s(t[o].substring(1))&&(r=!1):s(t[o])||(r=!1);return r?e[n]:void 0}function l(e){var t,r,o;e.script=f(e,"script"),e.script&&!~y.indexOf(e.script)&&(t=n.createElement("script"),t.type="text/javascript",t.src=e.script,t.async=!0,t.onload=function(){y.push(e.script),e.complete&&(e.stylesRequired?o=setInterval(function(){h&&(clearInterval(o),e.complete())},10):e.complete())},r=n.getElementsByTagName("script")[0],r.parentNode.insertBefore(t,r))}function d(e){var t,r,o,i=new XMLHttpRequest;e.style=f(e,"style"),e.style&&!~y.indexOf(e.style)&&(y.push(e.style),i.open("GET",e.style),i.onreadystatechange=function(){4===i.readyState&&(t=n.createElement("style"),t.type="text/css",r=i.responseText,t.styleSheet?t.styleSheet.cssText=r:t.appendChild(n.createTextNode(r)),o=n.getElementsByTagName("head")[0],o.appendChild(t),h=!0)},i.send(null))}var m,p={width:e.innerWidth,height:e.innerHeight},h=!1,g=[],b=[],y=[],v={};return v={fullscreen:function(){return m(e,"fullScreen")||m(n.documentElement,"requestFullscreen",!0)},ambientlight:function(){return m(e,"ondevicelight")},battery:function(){return m(t,"battery",!0)},geolocation:function(){return m(t,"geolocation")},pointerlock:function(){return m(n.documentElement,"requestPointerLock",!0)&&m(n,"exitPointerLock",!0)&&m(n,"pointerLockElement",!0)},userproximity:function(){return m(e,"onuserproximity")},devicemotion:function(){return m(e,"DeviceMotionEvent")},deviceorientation:function(){return m(e,"DeviceOrientationEvent")},orientationchange:function(){return m(screen,"onmozorientationchange")||m(screen,"onmsorientationchange")},vibrate:function(){return m(t,"vibrate",!0)},gamepads:function(){return m(t,"getGamepads")},getusermedia:function(){return m(t,"getUserMedia",!0)},contextmenu:function(){return m(n.documentElement,"contextMenu")&&m(e,"HTMLMenuItemElement")},touch:function(){return m(e,"ontouchstart")||m(t,"MaxTouchPoints")&&t.MaxTouchPoints>0||m(t,"msMaxTouchPoints")&&t.msMaxTouchPoints>0||m(e,"DocumentTouch")&&n instanceof DocumentTouch},contenteditable:function(){return m(n.documentElement,"contenteditable")&&m(e,"HTMLMenuItemElement")},draganddrop:function(){return m(n.documentElement,"draggable")&&m(n,"ondrag")&&m(n,"ondrop")},online:function(){return m(t,"onLine")},onlineevents:function(){return m(e,"ononline")&&m(e,"onoffline")},eventsource:function(){return m(e,"EventSource")},applicationcache:function(){return m(e,"applicationCache")},connection:function(){return m(t,"connection")},notification:function(){return m(e,"Notification",!0)},postmessage:function(){return m(e,"postMessage")},websocket:function(){return m(e,"WebSocket")},xhr2:function(){return m(e,"FormData")&&m(e,"XMLHttpRequestUpload")},cors:function(){return m(e,"XMLHttpRequest")&&"withCredentials"in new XMLHttpRequest},blobconstructor:function(){return m(e,"Blob")},dataset:function(){return m(n.documentElement,"dataset")},filereader:function(){return m(e,"File")&&m(e,"FileReader")&&m(e,"FileList")},fileapi:function(){return m(e,"File")&&m(e,"FileReader")&&m(e,"FileList")&&m(e,"Blob")&&m(e,"URL")},json:function(){return m(e,"JSON")&&!!JSON.parse},namevaluestorage:function(){return m(e,"localStorage")&&m(e,"sessionStorage")},websqldatabase:function(){return m(e,"openDatabase")},indexeddb:function(){return m(e,"indexedDB",!0)&&m(e,"IDBTransaction",!0)&&m(e,"IDBKeyRange",!0)},filehandle:function(){},hashchange:function(){return m(e,"onhashchange")},pagevisibility:function(){return m(n,"hidden",!0)},donottrack:function(){return m(t,"doNotTrack")},mutationobserver:function(){return m(e,"MutationObserver")},treewalker:function(){return m(e,"TreeWalker")},nodeiterator:function(){return m(e,"NodeIterator")},range:function(){return m(e,"Range")},matchmedia:function(){return m(e,"matchMedia")},webgl:function(){return m(e,"WebGLRenderingContext")},svg:function(){return n.createElementNS&&n.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},svgfilters:function(){return m(e,"SVGFEColorMatrixElement")&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE},webaudio:function(){return m(e,"AudioContext",!0)},speechsynthesis:function(){return m(e,"speechSynthesis")&&m(e,"SpeechSynthesisUtterance",!0)},performanceapi:function(){return m(e,"performance",!0)},highresolutiontime:function(){return m(e,"performance",!0)&&"function"==typeof e.performance.now},usertiming:function(){return m(e,"performance",!0)&&"function"==typeof e.performance.now&&"function"==typeof e.performance.mark},requestanimationframe:function(){return m(e,"requestAnimationFrame",!0)},worker:function(){return m(e,"Worker")},sharedworker:function(){return m(e,"SharedWorker")},currentscript:function(){return m(n,"currentScript")&&m(n,"onbeforescriptexecute")&&m(n,"onafterscriptexecute")},MOBILE:function(){return m("android")&&m("mobile")||m("blackberry")&&m("mobile")||m("firefox")&&m("fennec")||m("windows")&&m("phone")||m("opera")&&m("presto")||m("netfront")&&!m("kindle")||m("iphone|ipod|meego|webos|iemobile")||m("symbianos|doris|dorothy|gobrowser|maemo|minimo")||m("semc-browser|skyfire|teashark|teleca|uzardweb")},TABLET:function(){return!m("MOBILE")&&r.supports("touch")||m("tablet|kindle|silk|ipad")},DESKTOP:function(){return!m("MOBILE")&&!m("TABLET")},SLOWCONNECTION:function(){var e=m(t,"connection")&&t.connection||{type:0};return 3==e.type||4==e.type||/^[23]g$/.test(e.type)},RETINA:function(){return e.devicePixelRatio>1||e.matchMedia&&e.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches},MACOS:function(){return m("mac os|macos")},WINDOWS:function(){return m("windows|htc_hd2|xblwp|zunewp|IEMobile")},LINUX:function(){return m("linux")&&(m("debian|fedora|ubuntu|gentoo|red hat|suse|arch|centos")||m("slackware|mint|midori|kanotix|linspire|maemo|mageia|mandriva"))},BSD:function(){return m("freebsd|openbsd|netbsd|dragonfly")},ANDROID:function(){return m("android")},BLACKBERRY:function(){return m("blackberry|bb10")},IOS:function(){return m("like Mac OS")&&m("iphone|ipad|ipod")||m("Puffin")&&m("Linux")},FIREFOXOS:function(){return m("firefox")&&m("mobile")},CHROMEOS:function(){return m("cros")},UBUNTUTOUCH:function(){return m("ubuntu")&&m("touch|tablet|mobile")},GNUOS:function(){return m("gnu|icecat")},WEBOS:function(){return m("webos|hpwos")},SOLARIS:function(){return m("sunos")},SYMBIAN:function(){return m("symbos")},XBOX:function(){return m("xbox")},WII:function(){return m("wii|nintendo")},JAVA:function(){return m("java")}},o.prototype=new Error,o.prototype.constructor=o,{version:"0.5.1",load:c,support:g,env:b,supports:s,tests:v,cache:y,addTest:i,init:u}}();"function"==typeof define&&define.amd?define([],function(){return r}):e.devizr=r}(window,document,navigator);