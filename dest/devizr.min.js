/*!
 * devizr 0.5.1
 * Device asset manager and JS feature detector
 * Copyright (c) 2013, 2014 Uli Preuss
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function(e,n,t){"use strict";var r=function(){function o(e){this.name="Devizr Error",this.message=e||""}function i(e,n){b[e]=n}function c(){function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(r){switch(r){case e:return a.contentWindow;case n:return a.contentDocument;case n.documentElement:return a.contentDocument.documentElement;case t:return a.contentWindow.navigator;case screen:return a.contentWindow.screen}}var c=["moz","Moz","webkit","WebKit","ms","MS","o","O"],u=n.getElementsByTagName("body")[0],a=n.createElement("iframe");a.width="1",a.height="1",a.style.visibility="hidden",u.appendChild(a),p=function(n,t,o){var u,a,s,f=!1,l=e.navigator.userAgent.toLowerCase();if(1===arguments.length)return s=new RegExp(arguments[0],"i"),s.test(l);if(n=i(n),o)for(u=0;u<c.length;u++)a=c[u]+r(t),a in n&&(f=!0);return t in n&&(f=!0),f};for(var s in b){if("function"!=typeof b[s])throw new o("Invalid test - '"+s+"' is not a function!");b[s]()&&(s===s.toUpperCase()?y.push(s):g.push(s))}a.onload=function(){u.removeChild(a)}}function u(e){var n,t,r,o,i,c,u=0,s=0;if(a(e,"Array")){for(n=e.length;n>u;u++)t=e[u].width,t||(t=0),m.width>t>s&&(s=u);c=e[s]}else{if(!a(e,"Object"))throw new Error("devizr: Object or Array required!");c=e}r=c.addons;for(o in r)r.hasOwnProperty(o)&&(i=r[o],i.script&&l(i),i.style&&(i.stylesRequired=!0,d(i)))}function a(e,n){return Object.prototype.toString.call(e)==="[object "+n+"]"}function s(e){return!!~g.indexOf(e)}function f(e,n){var t=e.tests,r=!0,o=0;if("string"==typeof t&&(t=[t]),t)for(;o<t.length;o++)"!"===t[o][0]?s(t[o].substring(1))&&(r=!1):s(t[o])||(r=!1);return r?e[n]:void 0}function l(e){var t,r,o;e.script=f(e,"script"),e.script&&!~v.indexOf(e.script)&&(t=n.createElement("script"),t.type="text/javascript",t.src=e.script,t.async=!0,t.onload=function(){v.push(e.script),e.complete&&(e.stylesRequired?o=setInterval(function(){h&&(clearInterval(o),e.complete())},10):e.complete())},r=n.getElementsByTagName("script")[0],r.parentNode.insertBefore(t,r))}function d(e){var t,r,o,i=new XMLHttpRequest;e.style=f(e,"style"),e.style&&!~v.indexOf(e.style)&&(v.push(e.style),i.open("GET",e.style),i.onreadystatechange=function(){4===i.readyState&&(t=n.createElement("style"),t.type="text/css",r=i.responseText,t.styleSheet?t.styleSheet.cssText=r:t.appendChild(n.createTextNode(r)),o=n.getElementsByTagName("head")[0],o.appendChild(t),h=!0)},i.send(null))}var p,m={width:e.innerWidth,height:e.innerHeight},h=!1,g=[],y=[],v=[],b={};return b={fullscreen:function(){return p(e,"fullScreen")||p(n.documentElement,"requestFullscreen",!0)},ambientlight:function(){return p(e,"ondevicelight")},battery:function(){return p(t,"battery",!0)},geolocation:function(){return p(t,"geolocation")},pointerlock:function(){return p(n.documentElement,"requestPointerLock",!0)&&p(n,"exitPointerLock",!0)&&p(n,"pointerLockElement",!0)},userproximity:function(){return p(e,"onuserproximity")},devicemotion:function(){return p(e,"DeviceMotionEvent")},deviceorientation:function(){return p(e,"DeviceOrientationEvent")},orientationchange:function(){return p(screen,"onmozorientationchange")||p(screen,"onmsorientationchange")},vibrate:function(){return p(t,"vibrate",!0)},gamepads:function(){return p(t,"getGamepads")},getusermedia:function(){return p(t,"getUserMedia",!0)},contextmenu:function(){return p(n.documentElement,"contextMenu")&&p(e,"HTMLMenuItemElement")},online:function(){return p(t,"onLine")},onlineevents:function(){return p(e,"ononline")&&p(e,"onoffline")},eventsource:function(){return p(e,"EventSource")},applicationcache:function(){return p(e,"applicationCache")},connection:function(){return p(t,"connection")},notification:function(){return p(e,"Notification",!0)},postmessage:function(){return p(e,"postMessage")},websocket:function(){return p(e,"WebSocket")},xhr2:function(){return p(e,"FormData")&&p(e,"XMLHttpRequestUpload")},cors:function(){return p(e,"XMLHttpRequest")&&"withCredentials"in new XMLHttpRequest},blobconstructor:function(){return p(e,"Blob")},dataset:function(){return p(n.documentElement,"dataset")},filereader:function(){return p(e,"File")&&p(e,"FileReader")&&p(e,"FileList")},fileapi:function(){return p(e,"File")&&p(e,"FileReader")&&p(e,"FileList")&&p(e,"Blob")&&p(e,"URL")},json:function(){return p(e,"JSON")&&!!JSON.parse},namevaluestorage:function(){return p(e,"localStorage")&&p(e,"sessionStorage")},websqldatabase:function(){return p(e,"openDatabase")},indexeddb:function(){return p(e,"indexedDB",!0)&&p(e,"IDBTransaction",!0)&&p(e,"IDBKeyRange",!0)},filehandle:function(){},hashchange:function(){return p(e,"onhashchange")},pagevisibility:function(){return p(n,"hidden",!0)},touch:function(){return p(e,"ontouchstart")||p(t,"MaxTouchPoints")&&t.MaxTouchPoints>0||p(t,"msMaxTouchPoints")&&t.msMaxTouchPoints>0||p(e,"DocumentTouch")&&n instanceof DocumentTouch},contenteditable:function(){return p(n.documentElement,"contenteditable")&&p(e,"HTMLMenuItemElement")},draganddrop:function(){return p(n.documentElement,"draggable")&&p(n,"ondrag")&&p(n,"ondrag")},mutationobserver:function(){return p(e,"MutationObserver")},treewalker:function(){return p(e,"TreeWalker")},nodeiterator:function(){return p(e,"NodeIterator")},range:function(){return p(e,"Range")},matchmedia:function(){return p(e,"matchMedia")},webgl:function(){return p(e,"WebGLRenderingContext")},svg:function(){return n.createElementNS&&n.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},svgfilters:function(){return p(e,"SVGFEColorMatrixElement")&&2==SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE},webaudio:function(){return p(e,"AudioContext",!0)},speechsynthesis:function(){return p(e,"speechSynthesis")&&p(e,"SpeechSynthesisUtterance",!0)},performanceapi:function(){return p(e,"performance",!0)},highresolutiontime:function(){return p(e,"performance",!0)&&"function"==typeof e.performance.now},usertiming:function(){return p(e,"performance",!0)&&"function"==typeof e.performance.now&&"function"==typeof e.performance.mark},requestanimationframe:function(){return p(e,"requestAnimationFrame",!0)},worker:function(){return p(e,"Worker")},sharedworker:function(){return p(e,"SharedWorker")},currentscript:function(){return p(n,"currentScript")&&p(n,"onbeforescriptexecute")&&p(n,"onafterscriptexecute")},MOBILE:function(){return p("android")&&p("mobile")||p("blackberry")&&p("mobile")||p("firefox")&&p("fennec")||p("windows")&&p("phone")||p("opera")&&p("presto")||p("netfront")&&!p("kindle")||p("iphone|ipod|meego|webos|iemobile")||p("symbianos|doris|dorothy|gobrowser|maemo|minimo")||p("semc-browser|skyfire|teashark|teleca|uzardweb")},TABLET:function(){return!p("MOBILE")&&r.supports("touch")||p("tablet|kindle|silk|ipad")},DESKTOP:function(){return!p("MOBILE")&&!p("TABLET")},SLOWCONNECTION:function(){var e=p(t,"connection")&&t.connection||{type:0};return 3==e.type||4==e.type||/^[23]g$/.test(e.type)},RETINA:function(){return e.devicePixelRatio>1||e.matchMedia&&e.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches}},o.prototype=new Error,o.prototype.constructor=o,{version:"##VERSION##",load:u,support:g,env:y,supports:s,tests:b,cache:v,addTest:i,init:c}}();"function"==typeof define&&define.amd?define([],function(){return r}):e.devizr=r}(window,document,navigator);